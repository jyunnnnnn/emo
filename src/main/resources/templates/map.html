<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" class="is-light">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,userInfo-scalable=no" id="viewport"
          name="viewport">
    <title>EMO</title>
    <!--設定favicon-->
    <link rel="icon" href="/frontend/img/生活用品.svg" type="image/svg+xml">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!--引入 flatpickr日期選擇器-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!--CryptoJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <!-- 圓餅圖 -->
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <!-- 下拉式選單 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocas/4.2.5/tocas.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocas/4.2.5/tocas.min.js"></script>
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- 載入字型 -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Crimson+Pro">

    <!-- Bootstrap CSS -->
    <!--    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">-->
    <!-- Bootstrap Icons CSS
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.19.0/font/bootstrap-icons.css">-->
    <link rel="stylesheet" href="/frontend/boostrap.min.css">
    <link rel="stylesheet" href="/frontend/recordFW.css">
    <link rel="stylesheet" href="/frontend/setting.css">
    <link rel="stylesheet" href="/frontend/recordNachievement.css">
    <!--裁照片-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/earlyaccess/cwtexyen.css');
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Fredoka:wght@300..700&family=Madimi+One&family=Mandali&display=swap');
        body{
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow:hidden;
            font-family: 'cwTeXYen', 'Mandali', sans-serif;
        }
        #map {
            height: 100vh;
            width: 100%;
            position: absolute;
            z-index: 0;
        }
        .container, .container-fluid, .container-lg, .container-md, .container-sm, .container-xl {
            width: 100%;
            height:100vh;
            padding-right: 0px;
            padding-left: 0px;
            margin-right: auto;
            margin-left: auto;
        }

    </style>
</head>
<body>
<div class="container">
    <!-- Google Map -->
    <div style="display:flex;" id="map"></div>
    <!-- 使用者帳號 + 設定按鈕 -->
    <div class="titleContainer">
        <div class="showUser">
            <div id="userPhoto" style="display: none; ">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill=black class="bi bi-person-circle"
                     id="userIcon" viewBox="0 0 16 16">
                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                    <path fill-rule="evenodd"
                          d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                </svg>
            </div>
            <div>
                <div id="photoContainer" style="display: none; ">
                    <img id="photoDisplay" src="" style="width: 30px; height: 30px">
                </div>
            </div>
            <div style="display: block; ">
                <p id="user"></p>
                <p id="totalFootprint" style="font-size: 12px; border-radius: 20px; padding-left: 5px; padding-right: 5px;"></p>
            </div>
        </div>
        <div style="right: 8%">
            <!-- 設定按鈕 -->
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill=black
                 class="bi bi-gear-wide-connected" id="settingButton" viewBox="0 0 16 16">
                <path d="m8.932,0.727c-0.243,-0.97 -1.62,-0.97 -1.864,0l-0.071,0.286a0.96,0.96 0 0 1 -1.622,0.434l-0.205,-0.211c-0.695,-0.719 -1.888,-0.03 -1.613,0.931l0.08,0.284a0.96,0.96 0 0 1 -1.186,1.187l-0.284,-0.081c-0.96,-0.275 -1.65,0.918 -0.931,1.613l0.211,0.205a0.96,0.96 0 0 1 -0.434,1.622l-0.286,0.071c-0.97,0.243 -0.97,1.62 0,1.864l0.286,0.071a0.96,0.96 0 0 1 0.434,1.622l-0.211,0.205c-0.719,0.695 -0.03,1.888 0.931,1.613l0.284,-0.08a0.96,0.96 0 0 1 1.187,1.187l-0.081,0.283c-0.275,0.96 0.918,1.65 1.613,0.931l0.205,-0.211a0.96,0.96 0 0 1 1.622,0.434l0.071,0.286c0.243,0.97 1.62,0.97 1.864,0l0.071,-0.286a0.96,0.96 0 0 1 1.622,-0.434l0.205,0.211c0.695,0.719 1.888,0.03 1.613,-0.931l-0.08,-0.284a0.96,0.96 0 0 1 1.187,-1.187l0.283,0.081c0.96,0.275 1.65,-0.918 0.931,-1.613l-0.211,-0.205a0.96,0.96 0 0 1 0.434,-1.622l0.286,-0.071c0.97,-0.243 0.97,-1.62 0,-1.864l-0.286,-0.071a0.96,0.96 0 0 1 -0.434,-1.622l0.211,-0.205c0.719,-0.695 0.03,-1.888 -0.931,-1.613l-0.284,0.08a0.96,0.96 0 0 1 -1.187,-1.186l0.081,-0.284c0.275,-0.96 -0.918,-1.65 -1.613,-0.931l-0.205,0.211a0.96,0.96 0 0 1 -1.622,-0.434l-0.071,-0.286zm-0.932,12.27a4.998,4.998 0 1 1 0,-9.995a4.998,4.998 0 0 1 0,9.996l0,-0.001z" id="svg_1"/>
                <path d="m3.38545,6.70548c0,-0.24053 0.14086,-0.41852 0.43947,-0.41852l1.39747,0c0.27044,0 0.40021,0.16356 0.40021,0.33209c0,0.16356 -0.13522,0.33193 -0.40021,0.33193l-0.99162,0l0,0.70251l0.92419,0c0.27626,0 0.41148,0.16356 0.41148,0.33209c0,0.16356 -0.14086,0.33193 -0.41148,0.33193l-0.92419,0l0,0.73137l1.04251,0c0.27044,0 0.40003,0.16372 0.40003,0.33209c0,0.16372 -0.13522,0.33209 -0.40003,0.33209l-1.45381,0c-0.24791,0 -0.43383,-0.14432 -0.43383,-0.3608l0,-2.64677l-0.00018,0z"/>
                <path d="m6.22677,6.6255c0.02967,-0.17358 0.22254,-0.37127 0.4848,-0.37127c0.24727,0 0.44029,0.17358 0.49469,0.34716l0.58371,1.90971l0.00989,0l0.58339,-1.90971c0.0544,-0.17358 0.24727,-0.34716 0.49469,-0.34716c0.26194,0 0.45497,0.19769 0.4848,0.37127l0.45992,2.69114c0.00495,0.02893 0.00495,0.05786 0.00495,0.08181c0,0.21231 -0.15825,0.34716 -0.35606,0.34716c-0.25237,0 -0.35112,-0.1109 -0.38574,-0.33752l-0.29193,-1.96275l-0.00989,0l-0.5936,2.02061c-0.03462,0.11572 -0.12842,0.27966 -0.39563,0.27966c-0.26705,0 -0.36101,-0.16394 -0.39563,-0.27966l-0.5936,-2.02061l-0.00989,0l-0.29193,1.9629c-0.03462,0.22662 -0.13352,0.33752 -0.38574,0.33752c-0.19781,0 -0.35606,-0.13485 -0.35606,-0.34716c0,-0.02395 0,-0.05304 0.00495,-0.08181l0.45992,-2.69129z"/>
                <path d="m9.78654,8c0,-1.02213 0.62119,-1.80842 1.52628,-1.80842c0.89179,0 1.52628,0.81086 1.52628,1.80842c0,1.01722 -0.61675,1.80842 -1.52628,1.80842c-0.90066,0 -1.52628,-0.7912 -1.52628,-1.80842zm2.36054,0c0,-0.59467 -0.27961,-1.13022 -0.83426,-1.13022c-0.55465,0 -0.83412,0.53555 -0.83412,1.13022c0,0.59942 0.2706,1.13038 0.83412,1.13038c0.56352,0 0.83426,-0.53096 0.83426,-1.13038z"/>
            </svg>
        </div>
    </div>
    <!-- 主按鈕區 -->
    <div id="recordBtns">
        <!-- 一般記錄鈕 -->
        <button class="recordButton" id="openRecordModal"> 一般記錄</button>
        <!-- 路線記錄鈕 -->
        <button class="recordButton" id="startRecording"> 路線記錄</button>
        <!-- 查看紀錄鈕 -->
        <button class="recordButton" id="recordListButton"> 紀錄與成就</button>
    </div>
</div>

<!-- 懸浮窗：設定 -->
<div id="settingFW" onclick="closeFW(event)">
    <div id="settingModal" class="settingContainer">
        <!-- 關閉 -->
        <button class="btn" id="closeSettingModal" style="top:10px; right:10px;">
            <svg viewBox="0 0 20 20" height="17.5" width="15" xmlns="http://www.w3.org/2000/svg" class="icon">
                <g>
                    <line x1="16.9999" y1="7" x2="7.00001" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                    <line x1="7.00006" y1="7" x2="17" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                </g>
            </svg>
        </button>

        <div class="recordHeading" id="settingModalLabel">設定</div>

        <!-- 設定選項-->
        <button class="setBtn" id="rename">
            <div class="setIcon">
                <svg width="800px" height="800px" viewBox="0 0 24 24" fill="none">
                    <path d="M11.4001 18.1612L11.4001 18.1612L18.796 10.7653C17.7894 10.3464 16.5972 9.6582 15.4697 8.53068C14.342 7.40298 13.6537 6.21058 13.2348 5.2039L5.83882 12.5999L5.83879 12.5999C5.26166 13.1771 4.97307 13.4657 4.7249 13.7838C4.43213 14.1592 4.18114 14.5653 3.97634 14.995C3.80273 15.3593 3.67368 15.7465 3.41556 16.5208L2.05445 20.6042C1.92743 20.9852 2.0266 21.4053 2.31063 21.6894C2.59466 21.9734 3.01478 22.0726 3.39584 21.9456L7.47918 20.5844C8.25351 20.3263 8.6407 20.1973 9.00498 20.0237C9.43469 19.8189 9.84082 19.5679 10.2162 19.2751C10.5343 19.0269 10.823 18.7383 11.4001 18.1612Z"
                          fill="#1C274C"/>
                    <path d="M20.8482 8.71306C22.3839 7.17735 22.3839 4.68748 20.8482 3.15178C19.3125 1.61607 16.8226 1.61607 15.2869 3.15178L14.3999 4.03882C14.4121 4.0755 14.4246 4.11268 14.4377 4.15035C14.7628 5.0875 15.3763 6.31601 16.5303 7.47002C17.6843 8.62403 18.9128 9.23749 19.85 9.56262C19.8875 9.57563 19.9245 9.58817 19.961 9.60026L20.8482 8.71306Z"
                          fill="#1C274C"/>
                </svg>
            </div>
            <div class="setText">修改暱稱</div>
        </button>
        <form method="post" action="/user/logout">
            <button class="setBtn" id="logoutAccount">
                <div class="setIcon">
                    <svg viewBox="0 0 512 512">
                        <path d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"></path>
                    </svg>
                </div>
                <div class="setText">登出</div>
            </button>
        </form>


        <button class="setBtn" style="background-color: rgb(255, 69, 69);" id="deleteAccount">
            <div style="padding-left: 14px">
                <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 24 24" fill="white">
                    <path d="M5 6.77273H9.2M19 6.77273H14.8M9.2 6.77273V5.5C9.2 4.94772 9.64772 4.5 10.2 4.5H13.8C14.3523 4.5 14.8 4.94772 14.8 5.5V6.77273M9.2 6.77273H14.8M6.4 8.59091V15.8636C6.4 17.5778 6.4 18.4349 6.94673 18.9675C7.49347 19.5 8.37342 19.5 10.1333 19.5H13.8667C15.6266 19.5 16.5065 19.5 17.0533 18.9675C17.6 18.4349 17.6 17.5778 17.6 15.8636V8.59091M9.2 10.4091V15.8636M12 10.4091V15.8636M14.8 10.4091V15.8636"
                          stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="setText">刪除帳號</div>
        </button>
    </div>
</div>
<!-- 懸浮窗：修改暱稱 -->
<div id="renameFW" onclick="closeFW(event)">
    <div id="renameModal" class="settingContainer" style="width:330px; height: 250px;">
        <!-- 關閉 -->
        <button class="btn" id="closeRenameModal" style="top:10px; right:10px;">
            <svg viewBox="0 0 20 20" height="17.5" width="15" xmlns="http://www.w3.org/2000/svg" class="icon">
                <g>
                    <line x1="16.9999" y1="7" x2="7.00001" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                    <line x1="7.00006" y1="7" x2="17" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                </g>
            </svg>
        </button>

        <div class="recordHeading" id="renameAuthModalLabel">修改暱稱</div>
        <!-- 驗證密碼-->
        <input id="newName" name="rename" class="input" type="text">

        <button class="setBtn" id="renameBtn"
                style="background-color: rgb(255, 69, 69); width: 125px; margin-top: 30px;">
            <div class="setText" style="right: 12%">確認修改</div>
        </button>
    </div>
</div>
<!-- 懸浮窗：確認刪除 -->
<div id="deleteFW" onclick="closeFW(event)">
    <div id="deleteModal" class="settingContainer" style="width:330px;">
        <!-- 關閉 -->
        <button class="btn" id="closeDeleteModal" style="top:10px; right:10px;">
            <svg viewBox="0 0 20 20" height="17.5" width="15" xmlns="http://www.w3.org/2000/svg" class="icon">
                <g>
                    <line x1="16.9999" y1="7" x2="7.00001" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                    <line x1="7.00006" y1="7" x2="17" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                </g>
            </svg>
        </button>

        <div class="recordHeading" id="deleteAuthModalLabel">確定要刪除嗎？</div>
        <div style="font-size: 15px; display: inline" id="deleteDataTime"></div>
        <div style="font-size: 15px; display: inline" id="deleteDataFP"></div>
        <!-- 驗證密碼-->
        <input id="deleteAccount_matchVerifyCode" name="passwordAuth" class="input" type="text"
               placeholder="請輸入驗證碼">
        <button class="setBtn" id="deleteAccount_sendVerifyCode"
                style="background-color: rgb(163, 166, 168); width: 220px; margin-top: 20px;">
            <div class="setText" style="right: 12%; font-size: 18px;">發送驗證碼至信箱</div>
        </button>
        <button class="setBtn" id="deleteAccount_delete"
                style="background-color: rgb(255, 69, 69); width: 125px; margin-top: 10px;">
            <div class="setText" style="right: 12%">確認</div>
        </button>
    </div>
</div>

<!-- 懸浮窗：一般記錄 -->
<div id="recordFW" onclick="closeFW(event)">
    <div id="activityModal" class="recordContainer" style="max-width: 380px">
        <!-- 關閉 -->
        <button class="btn" id="closeRecordModal">
            <svg viewBox="0 0 20 20" height="17.5" width="15" xmlns="http://www.w3.org/2000/svg" class="icon">
                <g>
                    <line x1="16.9999" y1="7" x2="7.00001" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                    <line x1="7.00006" y1="7" x2="17" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                </g>
            </svg>
        </button>

        <div class="recordHeading" id="activityModalLabel">一般記錄</div>
        <form action="" class="recordForm">
            <!-- 類別選項 -->
            <div id="classType">
            </div>

            <!-- 行為選項 -->
            <div class="ts-select is-disabled" data-dropdown="select" id="select" style="width: 300px">
                <div class="content" id="selectedType">
                </div>
            </div>
            <div class="ts-dropdown is-bottom-right" style="width: 300px" data-name="select" data-position="bottom-start" id="type">
            </div>

            <!-- 克數選項 -->
            <div class="gram-inputs" id="gramRadios">
            </div>
            <input id="gram" name="gram" class="input" type="number">

            <!-- 碳足跡及小問號 -->
            <div style="display: flex;justify-content: center; margin-top:5px; font-size:15px;">
                <div>計算減碳量：</div>
                <div id="recordCalculate">0 gCo2E</div>
                <div class="questionMark">
                    <span class="detail" id="recordDetail">
                        <span id="recordCompare" style="background-color: #166a29; color: #ffffff; border-radius: 20px; font-weight: bold; padding: 5px; padding-left: 8px;">
                            選擇行為以獲得基準值
                        </span>
                        <span style="font-weight: bold; font-size: 15px; margin-left: 5px;">
                            計算公式如下
                        </span>
                        <span id="recordFormula" style="display: block; text-align: center;">
                            選擇行為以獲得計算公式
                        </span>
                    </span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" fill="none">
                        <path d="M10.125 8.875C10.125 7.83947 10.9645 7 12 7C13.0355 7 13.875 7.83947 13.875 8.875C13.875 9.56245 13.505 10.1635 12.9534 10.4899C12.478 10.7711 12 11.1977 12 11.75V13" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/>
                        <circle cx="12" cy="16" r="1" fill="#000000"/>
                        <path d="M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </div>
            </div>
            <!-- 儲存 -->
            <input id="saveRecord" class="save-button" type="submit" value="儲存">
            <input id="updateRecord" class="save-button" type="submit" value="確認更新" style="display: none">
            <input id="deleteRecord" class="save-button" type="submit" value="刪除資料" style="display: none">
        </form>
    </div>
</div>
<!-- 懸浮窗：路線紀錄 -->
<div id="routeFW" onclick="closeFW(event)">
    <div class="recordContainer">
        <!-- 關閉 -->
        <button class="btn" id="closeRouteModal">
            <svg viewBox="0 0 20 20" height="17.5" width="15" xmlns="http://www.w3.org/2000/svg" class="icon">
                <g>
                    <line x1="16.9999" y1="7" x2="7.00001" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                    <line x1="7.00006" y1="7" x2="17" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                </g>
            </svg>
        </button>

        <div class="recordHeading">路線記錄</div>
        <form action="" class="recordForm" style="display:flex; flex-wrap: wrap; justify-content:center; width: 240px;">
            <!-- 類別選項 -->
            <div id="trafficClassType" style="display: flex;flex-wrap: wrap;max-width:200px;">
            </div>
            <!-- 行為選項 -->
            <label id="trafficSubType">
                <div id="trafficMenu" style="display: block;">
                    <input id="kilometer" name="gram" class="input" type="number" disabled>
                </div>
            </label>
            <!-- 碳足跡及小問號 -->
            <div style="display: flex;justify-content: center; margin-top:5px; font-size:15px;">
                <div>計算減碳量：</div>
                <div id="routeCalculate">0 gCo2E</div>
                <div class="questionMark">
                    <span class="detail" id="routeDetail">
                        <span id="routeCompare" style="background-color: #166a29; color: #ffffff; border-radius: 20px; font-weight: bold; padding: 5px; padding-left: 8px;">
                            選擇行為以獲得基準值
                        </span>
                        <span style="font-weight: bold; font-size: 15px; margin-left: 5px;">
                            計算公式如下
                        </span>
                        <span id="routeFormula" style="display: block; text-align: center;">
                            選擇行為以獲得計算公式
                        </span>
                    </span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24" fill="none">
                        <path d="M10.125 8.875C10.125 7.83947 10.9645 7 12 7C13.0355 7 13.875 7.83947 13.875 8.875C13.875 9.56245 13.505 10.1635 12.9534 10.4899C12.478 10.7711 12 11.1977 12 11.75V13" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/>
                        <circle cx="12" cy="16" r="1" fill="#000000"/>
                        <path d="M7 3.33782C8.47087 2.48697 10.1786 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 10.1786 2.48697 8.47087 3.33782 7" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </div>
            </div>
            <!-- 儲存 -->
            <input id="saveTrafficRecord" class="save-button" type="submit" value="儲存">
            <input id="updateTrafficRecord" class="save-button" type="submit" value="確認更新">
            <input id="deleteTrafficRecord" class="save-button" type="submit" value="刪除資料">
        </form>
    </div>
</div>

<!-- 懸浮窗：紀錄與成就 -->
<div id="historyFW" onclick="closeFW(event)">
    <div class="historyContainer">
        <!-- 關閉 -->
        <button class="btn" id="closeHistoryModal" style="right: 5%; top:4%;">
            <svg viewBox="0 0 20 20" height="20" width="20" xmlns="http://www.w3.org/2000/svg" class="icon">
                <g>
                    <line x1="16.9999" y1="7" x2="7.00001" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                    <line x1="7.00006" y1="7" x2="17" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                </g>
            </svg>
        </button>

        <div class="historyHeading">摘要</div>
        <!-- 圖表 -->
        <div style="font-size: 20px; margin-left: 10px;">圖表</div>
        <div class="historyChart">
            <div style="margin-left: 20px; font-size: 20px;">
                <div>總減碳量<span style="color: #28a745; display: inline-block; width: 100%;" id="recordFP"></span></div>
                <div>已解鎖成就<span style="color: #28a745; display: inline-block; width: 100%;">0/10</span></div>
            </div>
            <div class="chart-box" id="chart" style="display: none; width: 230px; height: 230px;"></div>
        </div>
        <!-- 歷史記錄 -->
        <div class="historyTitle">
            <div style="font-size: 20px; margin-left: 10px;">紀錄</div>
            <div class="more" id="moreRecord">顯示更多</div>
        </div>
        <div id="newestRecord"></div>
        <!-- 成就 -->
        <div class="historyTitle">
            <div style="font-size: 20px; margin-left: 10px;">成就</div>
            <div class="more" id="moreAchievement">顯示更多</div>
        </div>
        <div id="achievement" class="historyAchievement">test</div>
    </div>
</div>
<!-- 懸浮窗：紀錄 -->
<div id="recordListFW" onclick="closeFW(event)">
    <div class="historyContainer">
        <!-- 返回 -->
        <div class="recordListReturn" id="recordReturn">
            〈摘要
        </div>

        <div class="historyHeading">紀錄</div>
        <div style="display: flex; justify-content: center;">
            <div style="flex:1; display: inline-flex; justify-content: center; align-items: center;">
                <p style="margin-top:16px; align-items: center; font-size: 20px; color: rgb(123, 125, 127);">
                    請選擇日期：</p>
                <input type="text" id="startDate"
                       style="text-align: center; font-size: 15px; color: rgb(123, 125, 127); width: 68%; height: 23px;"/>
            </div>
        </div>
        <div id="typeSelect" style="margin-bottom: 10px; display: flex; justify-content: space-between;">
            <div class="ts-select" data-dropdown="sort" id="sortType" style="width: 50%">
                <div class="content" id="selectedSortType">請選擇排序依據</div>
            </div>
            <div class="ts-dropdown" style="width: 42%; left: 35px; top: 237px; z-index: 101;" data-name="sort" data-position="bottom-start" id="sortTypeBtn">
                <button class="item" type="button" value="time" id="sortByTime">時間</button>
                <button class="item" type="button" value="footprint" id="sortByFP">減碳量</button>
            </div>
            <div class="ts-select" data-dropdown="method" id="method" style="width: 50%">
                <div class="content" id="selectedMethod">請選擇排序方式</div>
            </div>
            <div class="ts-dropdown" style="width: 42%; left: 35px; top: 237px; z-index: 101;" data-name="method" data-position="bottom-start" id="methodBtn">
                <button class="item" type="button" id="time1">近到遠</button>
                <button class="item" type="button" id="time2">遠到近</button>
                <button class="item" type="button" id="FP1">少到多</button>
                <button class="item" type="button" id="FP2">多到少</button>
            </div>
        </div>
        <div class="selectDiv">
            <div class="selectClass" id="selectClass">
            </div>
        </div>

        <div id="listContent" class="parent"></div>

        <div style="position: relative; display: flex;">
            <input id="editRecord" class="save-button" type="submit" value="編輯">
            <input id="saveEditRecord" class="save-button" type="submit" value="完成" style="display: none;">
            <input id="deleteEditRecord" class="save-button" type="submit" value="刪除" style="display: none;">
        </div>
    </div>
</div>
<!-- 懸浮窗：成就 -->
<div id="achievementFW" onclick="closeFW(event)">
    <div class="historyContainer">
        <!-- 返回 -->
        <div class="achievementReturn" id="achievementReturn">
            〈摘要
        </div>

        <div class="historyHeading">成就</div>
        <div class="historyAchievement">哈哈先這樣</div>
    </div>
</div>

<!-- 懸浮窗：確認關閉新增/修改 -->
<div id="closeAuthFW" onclick="closeFW(event)">
    <div id="closeAuthModal" class="settingContainer" style="width:300px; height: 200px;">
        <!-- 關閉 -->
        <button class="btn" id="closeAuthBtn" style="top:10px; right:10px;">
            <svg viewBox="0 0 20 20" height="17.5" width="15" xmlns="http://www.w3.org/2000/svg" class="icon">
                <g>
                    <line x1="16.9999" y1="7" x2="7.00001" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                    <line x1="7.00006" y1="7" x2="17" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                </g>
            </svg>
        </button>

        <div class="recordHeading" id="closeAuthModalLabel">要關閉視窗嗎？</div>
        <div style="font-size: 15px; display: inline">目前新增/更新的紀錄會遺失</div>

        <button class="setBtn" id="closeRecord"
                style="background-color: rgb(255, 69, 69); width: 125px; margin-top: 10px;">
            <div class="setText" style="right: 12%">關閉</div>
        </button>
    </div>
</div>

<!-- 懸浮窗：上傳照片 -->
<div id="uploadUserPhotoFW" onclick="closeFW(event)">
    <div id="uploadUserPhotoModal" class="settingContainer" style="width:300px;">
        <!-- 關閉 -->
        <button class="btn" id="uploadUserPhotoBtn" style="top:10px; right:10px;">
            <svg viewBox="0 0 20 20" height="17.5" width="15" xmlns="http://www.w3.org/2000/svg" class="icon">
                <g>
                    <line x1="16.9999" y1="7" x2="7.00001" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                    <line x1="7.00006" y1="7" x2="17" y2="16.9999" id="Path" stroke="#0C0310" stroke-width="2"
                          stroke-linecap="round"></line>
                </g>
            </svg>
        </button>
        <img id="originalPhoto" src="" style="display: none">
        <input id="changePhotoInput" style="display: none" type="button">
        <label class="changePhoto" id="changePhoto" for="changePhotoInput" style="display: none">
          <span>修改頭像</span>
        </label>
        <input type="file" id="fileInput" style="display: none" accept="image/*" multiple="false">
        <label class="photo" id="fileInputLabel" for="fileInput" style="display: none">
          <span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"></path><path fill="currentColor" d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"></path></svg> 選擇檔案
          </span>
        </label>
        <img id="cropperContainer" src="" alt="選擇一個圖片進行裁切" style="max-width: 100%; display: none">
        <input id="cropImageInput" style="display: none" type="button">
        <label class="changePhoto" id="cropImage" for="cropImageInput" style="display: none">
            <span>確認裁剪</span>
        </label>
        <img id="croppedImage" style="display: none"  src="" alt="裁切後的圖片">
        <input id="upLoadUserPhotoInput" style="display: none" type="button">
        <label class="changePhoto" id="upLoadUserPhoto" for="upLoadUserPhotoInput" style="display: none">
            <span>確認上傳</span>
        </label>
    </div>
</div>

</body>
<script src="/frontend/init.js"></script>
<script src="/frontend/saveRecord.js"></script>
<script src="/frontend/mapUI.js"></script>
<script src="/frontend/mapMatching.js"></script>
<script src="/frontend/deleteAccount.js"></script>
<script src="/frontend/routeRecord.js"></script>
<script src="/frontend/updateRecord.js"></script>
<script src="/frontend/deleteRecord.js"></script>
<script src="/frontend/recordList.js"></script>


<!-- 初始化地圖 -->
<script async defer th:src="@{'https://maps.googleapis.com/maps/api/js?v=weekly&key=' + ${apiKey} + '&callback=initMap&libraries=places,drawing,geometry'}"></script>

</html>
